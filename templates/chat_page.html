{% extends "base.html" %}

{% block title %}Chat - {{ chat.name }}{% endblock %}

{% block header %}
{% include 'components/header.html' %}
<script src="/static/js/socket_io.js"></script>
{% endblock %}

{% block content %}
<div class="chat-app-container">
    {% include 'components/sidebar.html' %}

    <div class="chat-main">
        <div class="chat-header">
            <h2>{{ chat.name }}</h2>
            <div class="chat-actions">
                <button id="toggle-users" title="Show Chat Members">
                    <i class="fas fa-users"></i>
                </button>
            </div>
        </div>

        <div class="chat-messages-container">
            <div class="chat-messages" id="chat-messages"></div>
        </div>

        <div class="chat-input-container">
            <input type="text" id="message-input" placeholder="Type your message..." />
            <button id="send-button">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Панель участников чата -->
    <div class="chat-members-panel" id="members-panel">
        <div class="chat-members-header">
            <h3>Chat Members</h3>
            <button id="close-members-panel">×</button>
        </div>
        <div class="chat-members-list" id="members-list">
            <!-- Здесь будут отображаться участники чата -->
            <div class="loading-spinner">Loading members...</div>
        </div>
    </div>
</div>
<script type="text/javascript" src="{{ url_for('static', filename='js/web_socket.js') }}"></script>
{% endblock %}